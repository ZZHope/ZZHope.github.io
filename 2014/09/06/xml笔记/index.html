<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>xmlç¬”è®° | ZZHope Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="XML
1.ä»€ä¹ˆæ˜¯XMLï¼Ÿ    
XMLï¼šExtensible Markup Language(å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼‰   

ä¼ è¾“æ•°æ®è€Œéæ˜¾ç¤ºæ•°æ®  (åŒºåˆ«äºHTML) 
æ ‡ç­¾æ²¡æœ‰æ²¡é¢„å®šï¼Œéœ€è¦è‡ªè¡Œå®šä¹‰æ ‡ç­¾ï¼Œå…·æœ‰è‡ªæˆ‘æè¿°æ€§   
è¢«è®¾è®¡ä¸ºä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼Œç„¦ç‚¹æ˜¯æ•°æ®çš„å†…å®¹   

2.XMLçš„ç‰¹ç‚¹ï¼Ÿ    

ä»…ä»…æ˜¯çº¯æ–‡æœ¬   
å¯ä»¥å‘æ˜è‡ªå·±çš„æ ‡ç­¾   

3.XMLçš„æœ‰ç‚¹ï¼Ÿ    

ç®€åŒ–æ•°æ®å…±äº«">
<meta property="og:type" content="article">
<meta property="og:title" content="xmlç¬”è®°">
<meta property="og:url" content="http://yoursite.com/2014/09/06/xmlç¬”è®°/">
<meta property="og:site_name" content="ZZHope Blog">
<meta property="og:description" content="XML
1.ä»€ä¹ˆæ˜¯XMLï¼Ÿ    
XMLï¼šExtensible Markup Language(å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼‰   

ä¼ è¾“æ•°æ®è€Œéæ˜¾ç¤ºæ•°æ®  (åŒºåˆ«äºHTML) 
æ ‡ç­¾æ²¡æœ‰æ²¡é¢„å®šï¼Œéœ€è¦è‡ªè¡Œå®šä¹‰æ ‡ç­¾ï¼Œå…·æœ‰è‡ªæˆ‘æè¿°æ€§   
è¢«è®¾è®¡ä¸ºä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼Œç„¦ç‚¹æ˜¯æ•°æ®çš„å†…å®¹   

2.XMLçš„ç‰¹ç‚¹ï¼Ÿ    

ä»…ä»…æ˜¯çº¯æ–‡æœ¬   
å¯ä»¥å‘æ˜è‡ªå·±çš„æ ‡ç­¾   

3.XMLçš„æœ‰ç‚¹ï¼Ÿ    

ç®€åŒ–æ•°æ®å…±äº«">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="xmlç¬”è®°">
<meta name="twitter:description" content="XML
1.ä»€ä¹ˆæ˜¯XMLï¼Ÿ    
XMLï¼šExtensible Markup Language(å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼‰   

ä¼ è¾“æ•°æ®è€Œéæ˜¾ç¤ºæ•°æ®  (åŒºåˆ«äºHTML) 
æ ‡ç­¾æ²¡æœ‰æ²¡é¢„å®šï¼Œéœ€è¦è‡ªè¡Œå®šä¹‰æ ‡ç­¾ï¼Œå…·æœ‰è‡ªæˆ‘æè¿°æ€§   
è¢«è®¾è®¡ä¸ºä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼Œç„¦ç‚¹æ˜¯æ•°æ®çš„å†…å®¹   

2.XMLçš„ç‰¹ç‚¹ï¼Ÿ    

ä»…ä»…æ˜¯çº¯æ–‡æœ¬   
å¯ä»¥å‘æ˜è‡ªå·±çš„æ ‡ç­¾   

3.XMLçš„æœ‰ç‚¹ï¼Ÿ    

ç®€åŒ–æ•°æ®å…±äº«">

  
    <link rel="alternative" href="/atom.xml" title="ZZHope Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ZZHope Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-xmlç¬”è®°" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/09/06/xmlç¬”è®°/" class="article-date">
  <time datetime="2014-09-06T08:51:01.000Z" itemprop="datePublished">Sep 6 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      xmlç¬”è®°
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="XML">XML</h1>
<p>1.ä»€ä¹ˆæ˜¯XMLï¼Ÿ    </p>
<p>XMLï¼šExtensible Markup Language(å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼‰   </p>
<ul>
<li>ä¼ è¾“æ•°æ®è€Œéæ˜¾ç¤ºæ•°æ®  (åŒºåˆ«äºHTML) </li>
<li>æ ‡ç­¾æ²¡æœ‰æ²¡é¢„å®šï¼Œéœ€è¦è‡ªè¡Œå®šä¹‰æ ‡ç­¾ï¼Œå…·æœ‰è‡ªæˆ‘æè¿°æ€§   </li>
<li>è¢«è®¾è®¡ä¸ºä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼Œç„¦ç‚¹æ˜¯æ•°æ®çš„å†…å®¹   </li>
</ul>
<p>2.XMLçš„ç‰¹ç‚¹ï¼Ÿ    </p>
<ul>
<li>ä»…ä»…æ˜¯çº¯æ–‡æœ¬   </li>
<li>å¯ä»¥å‘æ˜è‡ªå·±çš„æ ‡ç­¾   </li>
</ul>
<p>3.XMLçš„æœ‰ç‚¹ï¼Ÿ    </p>
<ul>
<li>ç®€åŒ–æ•°æ®å…±äº«   </li>
<li>ç®€åŒ–æ•°æ®ä¼ è¾“*  </li>
<li>ç®€åŒ–å¹³å°å˜æ›´   </li>
<li>ä½¿æ•°æ®æ›´æœ‰ç”¨ï¼šç‹¬ç«‹äºç¡¬ä»¶ã€è½¯ä»¶åŠåº”ç”¨ç¨‹åº</li>
</ul>
<p>4.æ ‘ç»“æ„ï¼Ÿï¼ˆé‡ç‚¹ï¼‰    </p>
<pre><code>ä¾‹å­ï¼š
<span class="tag">&lt;<span class="title">bookstore</span>&gt;</span>
<span class="tag">&lt;<span class="title">book</span> <span class="attribute">category</span>=<span class="value">"COOKING"</span>&gt;</span>
 <span class="tag">&lt;<span class="title">title</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span>Everyday Italian<span class="tag">&lt;/<span class="title">title</span>&gt;</span> 
 <span class="tag">&lt;<span class="title">author</span>&gt;</span>Giada De Laurentiis<span class="tag">&lt;/<span class="title">author</span>&gt;</span> 
 <span class="tag">&lt;<span class="title">year</span>&gt;</span>2005<span class="tag">&lt;/<span class="title">year</span>&gt;</span> 
 <span class="tag">&lt;<span class="title">price</span>&gt;</span>30.00<span class="tag">&lt;/<span class="title">price</span>&gt;</span> 
<span class="tag">&lt;/<span class="title">book</span>&gt;</span>
<span class="tag">&lt;<span class="title">book</span> <span class="attribute">category</span>=<span class="value">"CHILDREN"</span>&gt;</span>
 <span class="tag">&lt;<span class="title">title</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span>Harry Potter<span class="tag">&lt;/<span class="title">title</span>&gt;</span> 
 <span class="tag">&lt;<span class="title">author</span>&gt;</span>J K. Rowling<span class="tag">&lt;/<span class="title">author</span>&gt;</span> 
 <span class="tag">&lt;<span class="title">year</span>&gt;</span>2005<span class="tag">&lt;/<span class="title">year</span>&gt;</span> 
 <span class="tag">&lt;<span class="title">price</span>&gt;</span>29.99<span class="tag">&lt;/<span class="title">price</span>&gt;</span> 
<span class="tag">&lt;/<span class="title">book</span>&gt;</span>
<span class="tag">&lt;<span class="title">book</span> <span class="attribute">category</span>=<span class="value">"WEB"</span>&gt;</span>
 <span class="tag">&lt;<span class="title">title</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span>Learning XML<span class="tag">&lt;/<span class="title">title</span>&gt;</span> 
 <span class="tag">&lt;<span class="title">author</span>&gt;</span>Erik T. Ray<span class="tag">&lt;/<span class="title">author</span>&gt;</span> 
 <span class="tag">&lt;<span class="title">year</span>&gt;</span>2003<span class="tag">&lt;/<span class="title">year</span>&gt;</span> 
 <span class="tag">&lt;<span class="title">price</span>&gt;</span>39.95<span class="tag">&lt;/<span class="title">price</span>&gt;</span> 
<span class="tag">&lt;/<span class="title">book</span>&gt;</span>
<span class="tag">&lt;/<span class="title">bookstore</span>&gt;</span>   
</code></pre><p>æ³¨é‡Šï¼šä¾‹å­ä¸­çš„æ ¹å…ƒç´ æ˜¯ bookstoreã€‚æ–‡æ¡£ä¸­çš„æ‰€æœ‰bookå…ƒç´ éƒ½è¢«åŒ…å«åœ¨ bookstore ä¸­ã€‚   </p>
<pre><code><span class="subst">*</span> åˆ›å»º<span class="built_in">xml</span>æ–‡ä»¶ä¸plistæ–‡ä»¶ä¸€æ ·ï¼Œå°†åç¼€æ”¹ä¸º<span class="built_in">xml</span>;
</code></pre><p>5.è¯­æ³•è§„åˆ™    </p>
<pre><code><span class="keyword">*</span>XMLå¿…é¡»æœ‰æ ¹å…ƒç´    
<span class="keyword">*</span>XMLå¿…é¡»æœ‰å…³é—­æ ‡ç­¾   
<span class="keyword">*</span>XMLæ ‡ç­¾å¯¹å¤§å°å†™æ•æ„Ÿ
<span class="keyword">*</span>XMLå…ƒç´ å¿…é¡»è¢«æ­£ç¡®åµŒå¥— 
<span class="keyword">*</span>å±æ€§å¿…é¡»åŠ åŒå¼•å·
</code></pre><p>6.XMLè§£æ (NSXMLParserè§£ææ–¹æ³•)<br>*SAX: ï¼ˆï¼ï¼åªèƒ½è¯»ä¸èƒ½ä¿®æ”¹ï¼Œè§£æé€Ÿåº¦å¿«ï¼‰    </p>
<ul>
<li>1ï¼‰SAXï¼ˆSimple APIs for XMLï¼‰ï¼Œå…¸å‹ç‰¹ç‚¹æ˜¯ï¼šäº‹ä»¶é©±åŠ¨ï¼Œå®ç°å¯¹XMLçš„è§£æ   </li>
<li>2ï¼‰å¯¹æ–‡æ¡£çš„è§£æ   </li>
<li>3ï¼‰é¡ºåºè®¿é—®æœºåˆ¶ï¼Œä¸èƒ½å€’å›å»é‡æ–°å¤„ç† </li>
<li></li>
<li>DOMï¼šï¼ˆï¼ï¼ä¸ä»…èƒ½è¯»ï¼Œè¿˜èƒ½ä¿®æ”¹ï¼Œè§£æé€Ÿåº¦æ…¢ï¼‰   </li>
<li><p>DOM ï¼ˆDocument Object Modelï¼Œæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰å®šä¹‰äº†è®¿é—®å’Œæ“ä½œæ–‡æ¡£çš„æ ‡å‡†æ–¹æ³•ã€‚<br>*1ï¼‰ æ•°ç»“æ„   </p>
<p><em>*åŒºåˆ«ï¼šSAXï¼šé‡åˆ°æ ¹å…ƒç´ è¿›è¡Œåˆå§‹åŒ–ï¼Œé¡ºåºè¯»ä¸‹å»ï¼Œæ¯è¯»ä¸€è¡Œè§£æä¸€è¡Œï¼ŒåŸºäºäº‹ä»¶çš„ï¼Œ    æ¶ˆè€—å†…å­˜æ¯”è¾ƒå°ï¼›<br>DOMï¼šä¸€æ¬¡æ€§æŠŠæ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œæˆ‘ä»¬å¯ä»¥è¯»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…å±æ€§ï¼Œæ¶ˆè€—å†…å­˜è¾ƒå¤§ï¼›ä¸€èˆ¬ç”¨äºæœåŠ¡å™¨ä¸­
</em>è‹¹æœå†…éƒ¨ç”¨çš„æ˜¯SAX </p>
<hr>
</li>
</ul>
<p>7.å¸¸ç”¨è§£ææ¡†æ¶ (å¸¸ç”¨) </p>
<p>   1)SAX::NSXMLParser è¿™æ˜¯ä¸€ä¸ªSAXæ–¹å¼è§£æXMLçš„ç±»åº“ï¼Œé»˜è®¤åŒ…å«åœ¨             iOS SDKä¸­ï¼Œä½¿ç”¨ä¹Ÿæ¯”è¾ƒç®€å•ã€‚   </p>
<p>   2)DOM::<1>GDataXMLï¼Œ<a href="http://code.google.com/p/gdata-" target="_blank" rel="external">http://code.google.com/p/gdata-</a>        objectivec-client/source/browse/trunk/Source/        <2>XMLSupport/ï¼Œè¿™æ˜¯ä¸€å¥—Googleå¼€å‘çš„DOMæ–¹å¼XMLè§£æç±»åº“ï¼Œæ”¯æŒè¯»        å–å’Œä¿®æ”¹XMLæ–‡æ¡£ï¼Œæ”¯æŒXPathæ–¹å¼æŸ¥è¯¢ã€‚<br>   3)libxml2:åŒæ—¶æ”¯æŒSAX å’ŒDOM</2></1></p>
<p> **#ï¼šè§£ææ­¥éª¤ï¼š<br> 1&gt;.å¯¹äºSAXï¼š   </p>
<ul>
<li><p>è·å–XMLæ–‡ä»¶çš„è·¯å¾„  </p>
</li>
<li><p>æ ¹æ®URL æ¥åˆ›å»ºXMLçš„è§£æå™¨NSParserå¯¹è±¡  </p>
</li>
<li><p>è®¾ç½®XMLè§£æå™¨çš„ä»£ç†ï¼ˆç”¨ä»£ç†æ–¹æ³•è§£æï¼‰</p>
</li>
<li><p>å¼€å§‹è§£æ    </p>
</li>
</ul>
<p> 2&gt;.å¯¹äºDOMï¼šï¼ˆç”¨GDataXMLç¬¬ä¸‰æ–¹åº“ï¼‰   </p>
<ul>
<li>è·å–XMLæ–‡ä»¶çš„è·¯å¾„æˆ–è€…URL</li>
<li>æ ¹æ®URLè·¯å¾„ï¼ŒæŠŠæ–‡ä»¶è¯»å…¥å†…å­˜ä¸­ï¼ˆNSDataå¯¹è±¡ï¼šdataï¼‰</li>
<li>é€šè¿‡dataå¯¹è±¡åˆ›å»ºDataXMLDocument ï¼ˆdocï¼‰å¯¹è±¡</li>
<li>å–å‡ºXMLçš„æ ¹å…ƒç´ ï¼ˆ[doc rootElement]æ–¹æ³•ï¼‰;</li>
<li>ç”±äºdocåœ¨å†…å­˜ä¸­æ˜¯æ ‘å½¢ç»“æ„ï¼Œå¯ä»¥æ ¹æ®å­å…ƒç´ çš„åå­—å–å‡ºæ‰€æœ‰è¯¥å­å…ƒç´ <br>  çš„å­å…ƒç´       </li>
<li><p>éå†æ‰€æœ‰å­å…ƒç´ ï¼Œä¾æ¬¡è§£æå‡ºå­å…ƒç´ çš„å±æ€§å’Œæ–‡æœ¬å†…å®¹   </p>
<ul>
<li>for (GDataXMLElement *element in elements)    </li>
<li>[element attributeForName:kCategory]æ–¹æ³•   </li>
</ul>
</li>
</ul>
<h2 id="JSON">JSON</h2>
<p>1.JSONå®šä¹‰å’Œç‰¹ç‚¹ï¼š   </p>
<ul>
<li>JSON ï¼ˆJavaScript Object Notationï¼‰ JavaScript å¯¹è±¡è¡¨ç¤ºæ³•   </li>
<li>JSON æ˜¯è½»é‡çº§çš„æ–‡æœ¬æ•°æ®äº¤æ¢æ ¼å¼      </li>
<li>JSON ç‹¬ç«‹äºè¯­è¨€   </li>
<li>JSON å…·æœ‰è‡ªæˆ‘æè¿°æ€§ï¼Œæ›´æ˜“ç†è§£   </li>
</ul>
<p>2.JSONæ ¼å¼ï¼šï¼ˆæ•°ç»„æˆ–è€…å­—å…¸ï¼‰   </p>
<pre><code>[  

 {   

  <span class="string">"name"</span>: <span class="string">"zhangsan"</span>,   

 <span class="string">"age"</span>: <span class="number">30</span>,   

 <span class="string">"phone"</span>: [   

       <span class="string">"123456"</span>,   

       <span class="string">"654321"</span>   

       ],   

 <span class="string">"address"</span>: {   

 <span class="string">"country"</span>: <span class="string">"china"</span>,   

 <span class="string">"province"</span>: <span class="string">"henan"</span>   

 },   

 <span class="string">"married"</span>: <span class="keyword">false</span>   

 },   

 {   

 <span class="string">"name"</span>: <span class="string">"lisi"</span>,   

 <span class="string">"age"</span>: <span class="number">40</span>,   

<span class="string">"phone"</span>: [   

       <span class="string">"123456"</span>,   

       <span class="string">"654321"</span>   

       ],   

<span class="string">"address"</span>: {   

<span class="string">"country"</span>: <span class="string">"china"</span>,   

<span class="string">"province"</span>: <span class="string">"henan"</span>   

},   

<span class="string">"married"</span>: <span class="keyword">false</span>   

}   

]  

##*** <span class="built_in">array</span> ä¸­å¯ä»¥æ”¾ç½®çš„<span class="keyword">value</span>ç±»å‹ï¼š
                    <span class="built_in">string</span>,number ,<span class="keyword">object</span> ,<span class="built_in">array</span> ,<span class="keyword">true</span> ,<span class="keyword">false</span> ,null  
</code></pre><p>3.JSONè§£ææ­¥éª¤   </p>
<ul>
<li>å–å‡ºæ–‡ä»¶URL   </li>
<li>åˆ›å»ºdata   </li>
<li>ä½¿ç”¨NSJSONSeriazilation æ¥è§£ædata(æ¥æ”¶ç”¨æ•°ç»„è¿˜æ˜¯å­—å…¸æ ¹æ®æ–‡ä»¶    è€Œå®š)</li>
<li>ä¸€ä¸ªä¸€ä¸ªå…ƒç´ è§£æï¼Œæˆ–è€…ç”¨å­—å…¸éå†   </li>
</ul>
<p>4.JSONæœ‰ç”¨çš„ç½‘ç«™   </p>
<ul>
<li>JSONæ ¼å¼æ ¡éªŒç½‘ç«™ï¼š<a href="http://jsonlint.com" target="_blank" rel="external">http://jsonlint.com</a>    </li>
<li>www.json.org    </li>
<li>www.bejson.com (æ ¼å¼æ ¡éªŒï¼Œå¼€æ”¾æ¥å£ç­‰)   </li>
</ul>
<p>5.json çš„è§£ææ¡†æ¶ï¼šJSONKitï¼ˆä¸å¸¸ç”¨ï¼Œç‰ˆæœ¬è¾ƒä½ï¼‰ å’Œ NSJSONSeriazilationï¼ˆç³»ç»Ÿçš„ï¼Œä¸»æµçš„ï¼‰  </p>
<ul>
<li>www.json.org ç½‘å€ä¸Šæ‰“å¼€JSONKité€‰é¡¹ç„¶åå¤åˆ¶ç½‘å€ï¼Œæ‰§è¡Œ  git clone <a href="https://github.com/johnezang/JSONKit.git" target="_blank" rel="external">https://github.com/johnezang/JSONKit.git</a> (å¤åˆ¶çš„ç½‘å€)</li>
</ul>
<h2 id="ç¬¬ä¸‰æ–¹åº“çš„åº”ç”¨">ç¬¬ä¸‰æ–¹åº“çš„åº”ç”¨</h2>
<ul>
<li>æ·»åŠ åº“ï¼šBuilding setting â€”&gt;æœç´¢include /Header     Search â€¦é€‰é¡¹ï¼ŒåŒå‡»æ·»åŠ æç¤ºçš„åº“è·¯å¾„    </li>
<li>é“¾æ¥ï¼šBuilding setting â€”&gt;æœç´¢link/Other linker     flags â€¦ é€‰é¡¹â€”&gt; åŒå‡»æ·»åŠ é“¾æ¥   </li>
<li>ç¼–è¯‘ARCå’ŒéARC ï¼šBuilding phase â€”&gt;æ‰¾åˆ°Compile Source â€¦é€‰é¡¹ â€”&gt;åœ¨éARCå¾—æ–‡ä»¶åé¢æ·»åŠ â€œ-fno-objc-arc â€ </li>
</ul>
<h1 id="JSONä¸XMLè§£æç¨‹åºï¼š">JSONä¸XMLè§£æç¨‹åºï¼š</h1>
<ul>
<li>1.URL-&gt;NSRequest</li>
<li><p>2.[NSURLConnection sendAsynchronousRequest:request     queue:[[NSOperationQueue alloc] init]             completionHandler:^(NSURLResponse <em>response, NSData     </em>data, NSError *connectionError) {  </p>
<pre><code>   <span class="number">1</span>&gt;JSONæ­¥éª¤å¦‚ä¸‹:

  <span class="comment">// ååºåˆ—åŒ–</span>
  <span class="built_in">NSArray</span> *array = [NSJSONSerialization JSONObjectWithData:data options:<span class="number">0</span> error:<span class="literal">NULL</span>];

  <span class="comment">// å»ºç«‹æ•°ç»„</span>
  <span class="built_in">NSMutableArray</span> *arrayM = [<span class="built_in">NSMutableArray</span> array];

  [array enumerateObjectsUsingBlock:^(<span class="keyword">id</span> obj, NSUInteger idx, <span class="built_in">BOOL</span> *stop) {
      Video *v = [[Video alloc] init];

      [v setValuesForKeysWithDictionary:obj];

      [arrayM addObject:v];
  }];

  <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^{
      <span class="keyword">self</span><span class="variable">.videoList</span> = [arrayM <span class="keyword">copy</span>];

      [<span class="keyword">self</span><span class="variable">.refreshControl</span> endRefreshing];
    }); 
</code></pre></li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">  <span class="number">2</span>) XMLæ­¥éª¤ï¼š   </div><div class="line">      </div><div class="line"> <span class="comment">//1&gt;</span></div><div class="line">      NSXMLParser *parser = [[NSXMLParser alloc] initWithData:data];</div><div class="line">      </div><div class="line"><span class="comment">// 2&gt; è®¾ç½®ä»£ç†</span></div><div class="line">      parser.<span class="keyword">delegate</span> = <span class="keyword">self</span>;</div><div class="line">      </div><div class="line"><span class="comment">//3&gt; å¼€å§‹è§£æ</span></div><div class="line">      [parser parse];</div></pre></td></tr></table></figure>


<p> }];</p>
<h2 id="XMLçš„ä»£ç†æ–¹æ³•">XMLçš„ä»£ç†æ–¹æ³•</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line"><span class="preprocessor">###pragma mark 1. å¼€å§‹,å‡†å¤‡å·¥ä½œï¼Œåˆå§‹åŒ–ä¸€äº›æ•°ç»„ï¼Œå­—ç¬¦ä¸²</span></div><div class="line">- (<span class="keyword">void</span>)parserDidStartDocument:(NSXMLParser *)parser</div><div class="line">{</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"å¼€å§‹è§£ææ–‡æ¡£"</span>);</div><div class="line">    <span class="comment">// å‡†å¤‡å·¥ä½œ</span></div><div class="line">    <span class="comment">// 1&gt; dataList</span></div><div class="line">        </div><div class="line">    <span class="comment">// 2&gt; elementString</span></div><div class="line">    <span class="comment">// æ¸…ç©ºå¯å˜å­—ç¬¦ä¸²ä¸è¦è®¾ç½®æˆnil,ä½¿ç”¨setStringåªæ˜¯æ¸…ç©ºå†…å®¹,ä¸‹æ¬¡ä¸ä¼šå†æ¬¡å®ä¾‹åŒ–</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">###pragma mark 2. æ‰€æœ‰å¼€å§‹ä¸€ä¸ªèŠ‚ç‚¹:<span class="title">&lt;element&gt;</span>ï¼Œå¼€å§‹èŠ‚ç‚¹éƒ½åœ¨è¿™é‡Œè¿›è¡Œ</span></div><div class="line">- (<span class="keyword">void</span>)parser:(NSXMLParser *)parser didStartElement:(<span class="built_in">NSString</span> *)elementName namespaceURI:(<span class="built_in">NSString</span> *)namespaceURI qualifiedName:(<span class="built_in">NSString</span> *)qName attributes:(<span class="built_in">NSDictionary</span> *)attributeDict</div><div class="line">{</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"å¼€å§‹èŠ‚ç‚¹:%@ %@"</span>, elementName, attributeDict);</div><div class="line">    <span class="comment">// å¦‚æœæ˜¯&lt;video&gt;æ–°å»ºå¯¹è±¡</span></div><div class="line">    <span class="keyword">if</span> ([elementName isEqualToString:<span class="string">@"video"</span>]) {</div><div class="line">        <span class="keyword">self</span><span class="variable">.v</span> = [[Video alloc] init];</div><div class="line">        <span class="keyword">self</span><span class="variable">.v</span><span class="variable">.videoId</span> = attributeDict[<span class="string">@"videoId"</span>];</div><div class="line">    }</div><div class="line">    </div><div class="line">    <span class="comment">// æ¯å¼€å§‹ä¸€ä¸ªæ–°èŠ‚ç‚¹ä¹‹å‰éƒ½æ¸…ç©ºelementString</span></div><div class="line">    <span class="comment">// é¿å…ä¸Šä¸€æ¬¡çš„ç»“æœè¢«é‡å¤æ‹¼æ¥,ä¾‹å¦‚æ‹¼å®Œåå­—æ˜¯"abc",å†æ‹¼é•¿åº¦å°±ä¼šå˜æˆ"vda1234"</span></div><div class="line">    [<span class="keyword">self</span><span class="variable">.elementString</span> setString:<span class="string">@""</span>];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">###pragma mark 3. æŸ¥æ‰¾å†…å®¹,å¯èƒ½ä¼šé‡å¤å¤šæ¬¡</span></div><div class="line">- (<span class="keyword">void</span>)parser:(NSXMLParser *)parser foundCharacters:(<span class="built_in">NSString</span> *)string</div><div class="line">{</div><div class="line">    <span class="comment">// æ‹¼æ¥å­—ç¬¦ä¸²</span></div><div class="line">    [<span class="keyword">self</span><span class="variable">.elementString</span> appendString:string];</div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">###pragma mark 4. èŠ‚ç‚¹ç»“æŸ <span class="title">&lt;/element&gt;</span></span></div><div class="line">- (<span class="keyword">void</span>)parser:(NSXMLParser *)parser didEndElement:(<span class="built_in">NSString</span> *)elementName namespaceURI:(<span class="built_in">NSString</span> *)namespaceURI qualifiedName:(<span class="built_in">NSString</span> *)qName</div><div class="line">{</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"ç»“æŸèŠ‚ç‚¹ %@"</span>, elementName);</div><div class="line">    <span class="comment">// åˆ¤æ–­å¦‚æœæ˜¯&lt;name&gt;è¦å¤åˆ¶</span></div><div class="line">    <span class="keyword">if</span> ([elementName isEqualToString:<span class="string">@"video"</span>]) {</div><div class="line">        [<span class="keyword">self</span><span class="variable">.dataList</span> addObject:<span class="keyword">self</span><span class="variable">.v</span>];</div><div class="line">    } <span class="keyword">else</span> <span class="keyword">if</span> (![elementName isEqualToString:<span class="string">@"videos"</span>]) {</div><div class="line">        [<span class="keyword">self</span><span class="variable">.v</span> setValue:<span class="keyword">self</span><span class="variable">.elementString</span> forKey:elementName];</div><div class="line">    }</div><div class="line">    <span class="comment">// æç¤º:ä½¿ç”¨KVCåªè¦æ˜¯æ•°å€¼å‹çš„å±æ€§,kvcä¼šè‡ªåŠ¨è®¾ç½®æˆå¯¹åº”çš„å±æ€§,è€Œæ— éœ€ç¨‹åºå‘˜å‚ä¸</span></div><div class="line"><span class="comment">//    if ([elementName isEqualToString:@"name"]) {</span></div><div class="line"><span class="comment">//        self.v.name = self.elementString;</span></div><div class="line"><span class="comment">//    } else if ([elementName isEqualToString:@"length"]) {</span></div><div class="line"><span class="comment">//        self.v.length = [NSNumber numberWithInt:[self.elementString intValue]];</span></div><div class="line"><span class="comment">//    }</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">###pragma mark 5. æ–‡æ¡£ç»“æŸ</span></div><div class="line">- (<span class="keyword">void</span>)parserDidEndDocument:(NSXMLParser *)parser</div><div class="line">{</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"è§£æç»“æŸ %@ %@"</span>, <span class="keyword">self</span><span class="variable">.dataList</span>, [<span class="built_in">NSThread</span> currentThread]);</div><div class="line">    </div><div class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^{</div><div class="line">        [<span class="keyword">self</span><span class="variable">.tableView</span> reloadData];</div><div class="line">        </div><div class="line">        <span class="comment">// å…³é—­åˆ·æ–°æ§ä»¶çš„åˆ·æ–°</span></div><div class="line">        [<span class="keyword">self</span><span class="variable">.refreshControl</span> endRefreshing];</div><div class="line">    });</div><div class="line"><span class="comment">//    [self.dataList enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {</span></div><div class="line"><span class="comment">//        NSLog(@"%@", obj);</span></div><div class="line"><span class="comment">//    }];</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="preprocessor">###pragma mark 6. å‡ºé”™å¤„ç†</span></div><div class="line">- (<span class="keyword">void</span>)parser:(NSXMLParser *)parser parseErrorOccurred:(<span class="built_in">NSError</span> *)parseError</div><div class="line">{</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, parseError<span class="variable">.localizedDescription</span>);</div><div class="line">}</div></pre></td></tr></table></figure>












      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2014/09/06/xmlç¬”è®°/" data-id="ptk39urad2n55gkl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/IOS-XML-JSON/">IOS XML JSON</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/11/06/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IOS-XML-JSON/">IOS XML JSON</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/IOS-XML-JSON/" style="font-size: NaNpx;">IOS XML JSON</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/11/06/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2014/09/06/xmlç¬”è®°/">xmlç¬”è®°</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>